"use strict";var howLongApp=angular.module("howLongApp",["howLongControllers","howLongFilters","angularMoment"]),howLongControllers=angular.module("howLongControllers",[]);howLongControllers.controller("SampleListCtrl",function(e,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e){var t=e.split(":"),a=new Date;return a.setHours(n(t[0])?t[0]:0),a.setMinutes(n(t[1])?t[1]:0),a.setSeconds(n(t[2])?t[2]:0),a}function l(e,t){var n=t.value-e.value,a=t.time-e.time;return n/a}function s(){if(e.samples.length<2)return e.rate=0,e.remaining=null,void(e.estimate=null);e.samples=t("orderBy")(e.samples,'"time"');var n,a,s=e.samples[0],r=e.samples[e.samples.length-1];for(n=1,a=e.samples.length;a>n;n++)e.samples[n].rate=l(e.samples[n-1],e.samples[n]);e.rate=l(s,r),e.remaining=e.target-r.value,e.estimate=new Date(r.time.getTime()+e.remaining/e.rate)}e.samples=[],e.target=0,e.rate=0,e.remaining=null,e.estimate=null,e.$watch("target",s),e.$watchCollection("samples",s),e.add=function(){e.samples.push({time:e.newsample.time?a(e.newsample.time):new Date,value:parseFloat(e.newsample.value)}),e.newsample={time:null,value:null}},e.remove=function(t){var n=e.samples.indexOf(t);e.samples.splice(n,1)}}),angular.module("howLongFilters",[]).filter("rate",function(){return function(e,t){if(isNaN(parseFloat(e)))return"";var n=1e3*parseFloat(e);return(60*n).toFixed(t)+" / minutes"}});